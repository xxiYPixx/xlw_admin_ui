# 管理端前端界面结构设计

- 技术栈：Vue3 + Element Plus + vue-router + pinia + axios（组合式 API）。
- 端内结构：登录页独立；登录后采用 **头部 + 侧边菜单 + 主内容** 三栏布局。
- 模块概览：用户管理、商品管理、订单管理、配送费用与折扣、商品分类、系统（登录/登出）。

## 路由与页面
- `/login` 登录页：账号/密码表单，登录后写 token 到 pinia 并跳转首页。
- `/` 首页，重定向 `/users`。
- `/users` 用户列表页。
- `/products` 商品列表页。
- `/orders` 订单列表页。
- `/fees` 配送费用配置页。
- `/discount-rules` 折扣规则列表页。
- `/categories` 商品分类管理页。

## 模块设计与界面划分
### 用户管理
- 页面：用户列表（搜索 + 表格 + 分页）。
- 搜索项：phone(模糊)、unit，下拉分页。
- 表格列：用户名、手机号、单元、楼层、房号、迅邻币数、累计订单、操作。
- 操作：新增（弹窗/抽屉表单），编辑（同表单，带 id），重置密码（小弹窗输入 newPassword），查看详情（抽屉或行展开），删除（确认弹窗）。
- API：`POST/PUT /xlw/user`，`PUT /xlw/user/reset-pwd`，`GET /xlw/user/page`，`GET /xlw/user/info/{id}`，`DELETE /xlw/user/{id}`。

### 商品管理
- 页面：商品列表（搜索 + 表格 + 分页）。
- 搜索项：productName(模糊)、categoryId、productStatus(在售/下架)、exchangeable(可兑换)、page。
- 表格列：名称、分类、价格、库存、状态、可兑换、兑换价、预览图、操作（字段以接口返回为准）。
- 操作：新增/编辑（表单：名称、描述、分类、价格、库存、预览图、状态、可兑换、兑换价），上下架切换，入库（弹窗输入 addNum），切换可兑换（exchangeable+exchangePrice），修改兑换价，查看详情，删除。
- API：`POST/PUT /xlw/product`，`PUT /xlw/product/stock/{id}`，`PUT /xlw/product/status/{id}`，`PUT /xlw/product/exchange-status`，`PUT /xlw/product/exchange-price/{id}`，`GET /xlw/product/list`，`GET /xlw/product/{id}`，`DELETE /xlw/product/{id}`。

### 订单管理
- 页面：订单列表（搜索 + 表格 + 分页）。
- 搜索项：userId、orderNo(模糊)、orderStatus、payStatus、orderType(商品/快递/快递+商品)、hasExchange、page。
- 表格列：以接口返回字段为准，至少包含 orderNo、订单状态、支付状态、orderType、hasExchange；金额、时间等按接口提供情况展示。
- 操作：
  - 状态流转：修改订单状态（status 0~7）、修改支付状态（0/1/2）。
  - 退款：标记退款、拒绝退款、确认退款（状态统一到 7）。
  - 查看详情（抽屉/详情页），删除订单。
- API：`PUT /xlw/order/status/{id}`，`PUT /xlw/order/pay-status/{id}`，`PUT /xlw/order/apply-refund/{id}`，`PUT /xlw/order/refuse-refund/{id}`，`PUT /xlw/order/confirm-refund/{id}`，`GET /xlw/order/list`，`GET /xlw/order/{id}`，`DELETE /xlw/order/{id}`。

### 配送费用与折扣
- 配送费配置页 `/fees`：列表/单行编辑（字段以接口返回为准，包含 feeName、feeValue、remark 等）。API：`PUT /xlw/fee`，`GET /xlw/fee/page`。
- 折扣规则页 `/discount-rules`：搜索 scopeType，列表显示 scopeType、minOrders、discountRate、discountDesc、操作。支持新增/编辑（弹窗表单），删除，查看详情。API：`GET/POST/PUT /xlw/fee/discount-rules`，`GET/DELETE /xlw/fee/discount-rules/{id}`。

### 商品分类
- 页面：分类列表（搜索 categoryName + 分页）。
- 表格列：分类名、操作（其他字段按接口返回补充）。
- 操作：新增分类（弹窗输入 categoryName），编辑分类，删除分类。
- API：`POST /xlw/category`，`PUT /xlw/category/{categoryId}`，`DELETE /xlw/category/{categoryId}`，`GET /xlw/category/page`，下拉 `GET /xlw/category/list` 供商品表单使用。

### 系统/通用
- 顶部右侧：当前账号信息、退出按钮（调用 `POST /xlw/logout`）。
- 全局加载态、错误提示、确认弹窗等通用组件。
- 登录后全局请求头附带 token；401 跳转登录。

## 组件与状态划分
- 布局组件：`BaseLayout`（头部/侧边/主体）。
- 页面组件：`LoginView`、`UsersView`、`ProductsView`、`OrdersView`、`FeesView`、`DiscountRulesView`、`CategoriesView`、`NotFoundView`。
- 共享配置：`src/config/menu.ts` 菜单配置；`src/utils/icons.ts` 图标映射。
- 状态管理（pinia）：
  - `useAuthStore`：token、用户信息、登录/登出动作。
  - `useCategoryStore`：分类列表缓存（下拉复用）。
  - 可按需：`useDictStore` 维护状态枚举（订单/支付/商品状态）。

## 交互与校验要点
- 表单校验：以必填与数值范围校验为主（价格/费用/折扣为数字；库存/加库存为正整数；折扣率 0~1；可兑换时兑换价必填）。
- 表格操作需要二次确认的动作：删除、状态变更、退款相关、上下架切换。
- 列表筛选支持重置；分页页码变化自动刷新。
- 所有写操作成功后刷新当前列表并给出成功提示。

## 导航菜单
- 用户管理
- 商品管理
- 订单管理
- 配送费用
- 折扣规则
- 商品分类
- 退出登录
